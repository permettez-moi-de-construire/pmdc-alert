{"version":3,"file":"index.mjs","sources":["../src/index.js"],"sourcesContent":["import once from 'lodash/once'\n\nclass AlertGenerator {\n  constructor (containerEl) {\n    this.containerEl = containerEl\n  }\n\n  _wrapContent (content) {\n    if (!content) {\n      return content\n    }\n\n    if (!content.nodeType) {\n      const wrappedContent = document.createElement('p')\n      wrappedContent.innerHTML = content\n      return wrappedContent\n    }\n\n    return content\n  }\n\n  _createAlert (content) {\n    const alertEl = document.createElement('div')\n    alertEl.classList.add('notification')\n\n    alertEl.classList.add('animated')\n    alertEl.classList.add('fadeInLeft')\n\n    alertEl.appendChild(this._wrapContent(content))\n\n    return alertEl\n  }\n\n  _displayAlert (alertEl, hideAfterDelay) {\n    this.containerEl.appendChild(alertEl)\n\n    // close on click\n    alertEl.addEventListener('click', (e) => {\n      e.preventDefault()\n\n      this._removeAlert(alertEl)\n    })\n\n    // close after delay\n    if (hideAfterDelay) {\n      window.setTimeout(() => {\n        this._removeAlert(alertEl)\n      }, hideAfterDelay)\n    }\n  }\n\n  _removeAlert (alertEl) {\n    if (this.containerEl.contains(alertEl)) {\n      const safeRemoveChild = once(this.containerEl.removeChild.bind(this.containerEl, alertEl));\n\n      ['webkitAnimationEnd', 'mozAnimationEnd', 'MSAnimationEnd', 'oanimationend', 'animationend']\n        .forEach((eName) => {\n          alertEl.addEventListener(eName, () => {\n            safeRemoveChild()\n          })\n        })\n\n      alertEl.classList.add('fadeOutLeft')\n\n      const closeEvent = new window.CustomEvent(AlertGenerator.events.CLOSE)\n      alertEl.dispatchEvent(closeEvent)\n    }\n  }\n\n  alert (content, hideAfterDelay, type) {\n    const alertEl = this._createAlert(content)\n    alertEl.classList.add(`is-${type}`)\n\n    this._displayAlert(alertEl, hideAfterDelay)\n\n    return alertEl\n  }\n\n  success (content, hideAfterDelay) {\n    return this.alert(content, hideAfterDelay, 'success')\n  }\n\n  danger (content, hideAfterDelay) {\n    return this.alert(content, hideAfterDelay, 'danger')\n  }\n\n  warning (content, hideAfterDelay) {\n    return this.alert(content, hideAfterDelay, 'warning')\n  }\n\n  primary (content, hideAfterDelay) {\n    return this.alert(content, hideAfterDelay, 'primary')\n  }\n\n  link (content, hideAfterDelay) {\n    return this.alert(content, hideAfterDelay, 'link')\n  }\n\n  info (content, hideAfterDelay) {\n    return this.alert(content, hideAfterDelay, 'info')\n  }\n}\n\nAlertGenerator.events = {\n  CLOSE: 'alert.close'\n}\n\nexport default AlertGenerator\n"],"names":["AlertGenerator","constructor","containerEl","_wrapContent","content","nodeType","wrappedContent","document","createElement","innerHTML","_createAlert","alertEl","classList","add","appendChild","this","_displayAlert","hideAfterDelay","addEventListener","e","preventDefault","_removeAlert","window","setTimeout","contains","safeRemoveChild","once","removeChild","bind","forEach","eName","closeEvent","CustomEvent","events","CLOSE","dispatchEvent","alert","type","success","danger","warning","primary","link","info"],"mappings":"2BAEA,IAAMA,EACJC,SAAaC,QACNA,YAAcA,GAGrBC,YAAAA,sBAAcC,OACPA,SACIA,MAGJA,EAAQC,SAAU,KACfC,EAAiBC,SAASC,cAAc,YAC9CF,EAAeG,UAAYL,EACpBE,SAGFF,GAGTM,YAAAA,sBAAcN,OACNO,EAAUJ,SAASC,cAAc,gBAC/BI,UAAUC,IAAI,kBAEdD,UAAUC,IAAI,cACdD,UAAUC,IAAI,gBAEdC,YAAYC,KAAKZ,aAAaC,IAE/BO,GAGTK,YAAAA,uBAAeL,EAASM,mBACjBf,YAAYY,YAAYH,KAGrBO,iBAAiB,iBAAUC,GACjCA,EAAEC,mBAEGC,aAAaV,KAIhBM,GACFK,OAAOC,wBACAF,aAAaV,IACjBM,IAIPI,YAAAA,sBAAcV,MACRI,KAAKb,YAAYsB,SAASb,GAAU,KAChCc,EAAkBC,EAAKX,KAAKb,YAAYyB,YAAYC,KAAKb,KAAKb,YAAaS,KAEhF,qBAAsB,kBAAmB,iBAAkB,gBAAiB,gBAC1EkB,iBAASC,GACRnB,EAAQO,iBAAiBY,uBAKrBlB,UAAUC,IAAI,mBAEhBkB,EAAa,IAAIT,OAAOU,YAAYhC,EAAeiC,OAAOC,OAChEvB,EAAQwB,cAAcJ,KAI1BK,YAAAA,eAAOhC,EAASa,EAAgBoB,OACxB1B,EAAUI,KAAKL,aAAaN,YAC1BQ,UAAUC,UAAUwB,QAEvBrB,cAAcL,EAASM,GAErBN,GAGT2B,YAAAA,iBAASlC,EAASa,UACTF,KAAKqB,MAAMhC,EAASa,EAAgB,YAG7CsB,YAAAA,gBAAQnC,EAASa,UACRF,KAAKqB,MAAMhC,EAASa,EAAgB,WAG7CuB,YAAAA,iBAASpC,EAASa,UACTF,KAAKqB,MAAMhC,EAASa,EAAgB,YAG7CwB,YAAAA,iBAASrC,EAASa,UACTF,KAAKqB,MAAMhC,EAASa,EAAgB,YAG7CyB,YAAAA,cAAMtC,EAASa,UACNF,KAAKqB,MAAMhC,EAASa,EAAgB,SAG7C0B,YAAAA,cAAMvC,EAASa,UACNF,KAAKqB,MAAMhC,EAASa,EAAgB,SAI/CjB,EAAeiC,OAAS,CACtBC,MAAO"}